!function(){"use strict";function a(a,t,e,r,o,n,h){function i(t,o,c,u,a,p){var m=this;return m.param={ids:[],filters:[],pageIndex:0,pageSize:50,keyword:"",sortName:"",sortDir:"",data:{}},m.setColumn=function(a){var e,r=[];return a.forEach(function(a){var t=a.className||"";e=o.newColumn(a.data),a.className&&e.withClass(t),0==a.sortable&&e.notSortable(),a.render&&e.renderWith(a.render),r.push(e)}),r},m.initTable=function(r,o,n,i,l,s,e){h.loadingIn(),n=n||{fixedColumn:[0,0]};var d=!1,a=!1;null!=l&&(d=!0);try{a=null!=l.rowCallback}catch(a){}return t.newOptions().withOption("ajax",function(a,t,e){n.dataStart=a.start;var r=Math.floor(a.start/a.length)+1;m.param.pageIndex=r,m.param.skip=a.start,m.param.pageSize=a.length,m.param.keyword=a.search.value,m.param.sortName=a.columns[a.order[0].column].data,m.param.sortDir=a.order[0].dir,"updatedDate"==m.param.sortName&&(m.param.sortDir="desc"),d&&void 0!==l.requestCallback&&(m.param=l.requestCallback(m.param)),d&&void 0!==l.responseCallback?new u.post(o,m.param).then(l.responseCallback):null!=o?(h.loadingIn(),new u.post(o,m.param).then(function(a){-1!==a.status&&(401!==a.status&&402!==a.status||(h.Alert.error(a.data.message),p.go("app.main.page")),200===a.data.statusCode?t({recordsTotal:a.data.data.totalRecords,recordsFiltered:a.data.data.totalRecordsFiltered,data:a.data.data.records}):404==a.data.statusCode?t({recordsTotal:0,recordsFiltered:0,data:[]}):null==a.data.data&&null!=m.param.data&&t({recordsTotal:m.param.data.total,recordsFiltered:m.param.data.filtered,data:m.param.data.data}),s)&&s(a.data)})):t({recordsTotal:m.param.data.total,recordsFiltered:m.param.data.filtered,data:m.param.data.data}),h.loadingOut()}).withDataProp("data").withOption("processing",!0).withOption("language",{processing:'<i class="fas fa-circle-notch fa-spin mr-2"></i> Processing ..'}).withDOM(n.dom||"rtilp").withOption("destroy",!0).withPaginationType("simple_numbers").withOption("serverSide",!0).withOption("deferRender",!1).withOption("scrollY",400).withOption("scrollX",!0).withOption("scrollCollapse",!0).withOption("autoWidth",!0).withOption("select",n.select||!0).withOption("stateSave",!0).withFixedColumns({leftColumns:n.fixedColumn[0],rightColumns:n.fixedColumn[1]}).withOption("stateSaveParams",function(a,t){e&&e.onStateSaveParam&&e.onStateSaveParam(t)}).withOption("stateLoadParams",function(a,t){e&&e.onStateLoadCallback?e.onStateLoadCallback(t):t.search.search=""}).withOption("createdRow",function(a,t,e){null==n.useNumbering&&(angular.element(a).contents()[0].innerHTML=e+1+n.dataStart),c(angular.element(a).contents())(r)}).withOption("rowCallback",a?l.rowCallback:function(a,t,e,r){return $("td",a).unbind("dblclick"),$("td",a).bind("dblclick",function(){null!=n.onDoubleClick?n.onDoubleClick(t[i]):p.go(n.route,{id:t[i]})}),$('[rel="tooltip"]').tooltip(),a}).withOption("rowGroup",!!n.rowGroup&&{dataSrc:n.rowGroup})},m}return this.getService=function(){return new i(a,t,e,r,0,n)},this}angular.module("ummuza").factory("datatableService",a),a.$inject=["DTOptionsBuilder","DTColumnBuilder","$compile","HttpService","$cookies","$state","farst"]}();