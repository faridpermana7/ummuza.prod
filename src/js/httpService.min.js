!function(){"use strict";function e(n,o,e,u,t,a,r,i){var c=t.config.getApiUrl();return{post:function(t,e){var r=u.defer();t=c+t+("?q="+$wConfig.util.guid());return a.add({url:t,canceller:r}),n({method:"POST",url:t,data:e,timeout:r.promise,headers:{Authorization:"Bearer "+i.getAccessToken(),"Content-Type":"application/json; charset=utf-8",Path:o.current.name}}).then(function(e){r.resolve(e),a.remove(t),i.authCheck(e.status)},function(e){a.remove(t),r.reject(e),i.authCheck(e.status)}),r.promise},put:function(t,e){var r=u.defer();t=c+t+("?q="+$wConfig.util.guid());return a.add({url:t,canceller:r}),n({method:"PUT",url:t,data:e,timeout:r.promise,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+i.getAccessToken(),Path:o.current.name}}).then(function(e){r.resolve(e),a.remove(t),i.authCheck(e.status)},function(e){a.remove(t),r.reject(e),i.authCheck(e.status)}),r.promise},get:function(t,e){var r=u.defer();t=c+t+("?q="+$wConfig.util.guid());return a.add({url:t,canceller:r}),n({method:"GET",url:t,data:e,timeout:r.promise,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+i.getAccessToken(),Path:o.current.name}}).then(function(e){r.resolve(e),a.remove(t),i.authCheck(e.status)},function(e){a.remove(t),r.reject(e),i.authCheck(e.status)}),r.promise},delete:function(t,e){var r=u.defer();t=c+t+("?q="+$wConfig.util.guid());return a.add({url:t,canceller:r}),delete n.defaults.headers.common["X-Requested-With"],n({method:"DELETE",url:t,data:e,timeout:r.promise,headers:{"Content-Type":"application/json; charset=utf-8",Authorization:"Bearer "+i.getAccessToken(),Path:o.current.name}}).then(function(e){r.resolve(e),a.remove(t),i.authCheck(e.status)},function(e){console.log(e.xhrStatus),a.remove(t),r.reject(e),console.log("REJECTED"),console.log(e),i.authCheck(e.status)}),r.promise},postFile:function(t,e){var r=u.defer();return t=c+t+("?q="+$wConfig.util.guid()),a.add({url:t,canceller:r}),n({method:"POST",url:t,data:e,timeout:r.promise,transformRequest:angular.identity,headers:{Authorization:"Bearer "+i.getAccessToken(),"Content-Type":void 0,Path:o.current.name}}).then(function(e){r.resolve(e),a.remove(t),i.authCheck(e.status)},function(e){a.remove(t),r.reject(e),i.authCheck(e.status)}),r.promise},postInter:function(t,e){var r=u.defer();return a.add({url:t,canceller:r}),n({method:"POST",url:t,data:e,timeout:r.promise,headers:{Authorization:"Bearer "+i.getAccessToken(),"Content-Type":"application/json; charset=utf-8",Path:o.current.name}}).then(function(e){r.resolve(e),a.remove(t),i.authCheck(e.status)},function(e){a.remove(t),r.reject(e),i.authCheck(e.status)}),r.promise}}}angular.module("ummuza").factory("HttpService",e).factory("PendingRequest",function(){var r=[];return this.get=function(){return r},this.add=function(e){r.push(e)},this.remove=function(t){r=_.filter(r,function(e){return e.url!==t})},this.cancelAll=function(){angular.forEach(r,function(e){e.canceller.resolve()}),r.length=0},this}),e.$inject=["$http","$state","$cookies","$q","ConfigService","PendingRequest","$httpParamSerializer","HttpAuthInterceptorService"]}();