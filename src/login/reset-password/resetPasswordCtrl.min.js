!function(){"use strict";function e(e,a,t,s,o,n,r,l,i,d,c,u,m){var w=this;return w.isReset=!1,w.model={},w.generateToken=a.token,w.resetStart=function(){w.isLoading=!0},w.resetFinished=function(){w.isLoading=!1},w.reset=function(){e="";var e=e=w.model.newPassword!=w.model.confirmPassword?"Password isn't equal! Please check your password.":e;""!=e?s.Alert.error(e):""==w.invalidPass?(w.resetStart(),o.post("/emails/reset-pass",{email:w.model.data.email[0],newPassword:w.model.newPassword,confirmPassword:w.model.confirmPassword,oldPassword:null}).then(function(e){(e.success||200==e.status)&&200==e.data.statusCode?w.isReset=!0:w.isReset=!1,w.resetFinished()})):(s.Alert.error(w.invalidPass),w.isReset=!1)},w.CheckPassword=function(){var e="";w.model.newPassword&&(null==w.model.newPassword.match(/(?=.*\d)/)&&(e+="Should contain at least one digit"),null==w.model.newPassword.match(/(?=.*[a-z])/)&&(e=""===e?"Should contain at least lower case":e+"\nShould contain at least lower case"),null==w.model.newPassword.match(/(?=.*[A-Z])/)&&(e=""===e?"Should contain at least upper case":e+"\nShould contain at least upper case"),null==w.model.newPassword.match(/[a-zA-Z0-9!@#$%^&*]{8,}/)&&(e=""===e?"Should contain at least 8 characters":e+"\nShould contain at least 8 characters"),null==w.model.newPassword.match(/(?=.*[!@#$%^&*])/))&&(e=""===e?"Should contain at least one special characters":e+"\nShould contain at least one special characters"),w.invalidPass=e},e.$on("$destroy",function(){c.cancelAll()}),w.init=(s.loadingIn(),void(""==w.generateToken||null==w.generateToken?(s.Alert.error("Token is invalid"),s.loadingOut(),t.go("forgot")):o.post("/emails/validate",{token:w.generateToken}).then(function(e){(e.success||200==e.status)&&200==e.data.statusCode?(s.Alert.success(e.data.message),w.model=e.data,s.loadingOut()):(s.Alert.error(e.data.message),s.loadingOut(),t.go("forgot"))}))),w}angular.module("farst").controller("ResetPasswordCtrl",e),e.$inject=["$scope","$stateParams","$state","FarstService","HttpService","$http","$q","ConfigService","$httpParamSerializer","$window","PendingRequest","NavService","$timeout"]}();