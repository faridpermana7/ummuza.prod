!function(){"use strict";angular.module("ummuza").controller("menuCtrl",t);function t(r,e,t,i){var u=this;return u.addChart=[],u.shoppingCarts=[],u.cartQty=0,i.$on("sendToMenu",function(t,a){r.info=!0,r.$apply(()=>{u.cartQty=a.cartQty,u.addChart=a.addChart,u.shoppingCarts=a.shoppingCarts})}),u.addToCart=async function(t,a){if(null!=a&&0<a){var r=[];switch(t){case"mix":r=_.find(u.listMixMenu,function(t){return t.productMenuId==a});break;case"ham":r=_.find(u.listHampresMenu,function(t){return t.productMenuId==a});break;case"froz":r=_.find(u.listFrozenMenu,function(t){return t.productMenuId==a});break;default:r=_.find(u.listMenu,function(t){return t.productMenuId==a})}if(0==r.stok)return e.Alert.error("Stok sudah habis, ditunggu ya");var n=(await Swal.fire({title:"Tambahkan Dimsum ke Keranjang",input:"number",inputLabel:r.title,inputPlaceholder:"Berapa pack?",inputAttributes:{min:1,max:50,step:1,pattern:"[0-9]{10}"},inputValidator:t=>50<t?"Maksimal pack adalah 50":t<=0?"Minimal order adalah 1 pack":void 0}))["value"];if(n){t=_.find(u.shoppingCarts,function(t){return t.productMenuId==a});for(let t=0;t<n;t++)u.addChart.push({productMenuId:a});e.Alert.success("Berhasil menambahkan "+r.title+" untuk "+n+" pack"),null==t&&(u.cartQty++,i.$broadcast("sendToNavbar",{cartQty:u.cartQty,addChart:u.addChart,listMenu:u.listMenu,listMixMenu:u.listMixMenu,listHampresMenu:u.listHampresMenu,listFrozenMenu:u.listFrozenMenu}))}}},u.init=(e.loadingIn(),void t.post("/productmenus/get",{ids:[],filters:[],pageSize:100,keyword:""}).then(function(t){e.loadingOut(),200==t.data.statusCode?(u.listMenu=_.filter(t.data.data.records,function(t){return"ORI"==t.category}),u.listMixMenu=_.filter(t.data.data.records,function(t){return"MIX"==t.category}),u.listHampresMenu=_.filter(t.data.data.records,function(t){return"HAMPRES"==t.category}),u.listFrozenMenu=_.filter(t.data.data.records,function(t){return"Frozen"==t.category})):401==t.status||402==t.status?e.Alert.error(t.data.message):e.Alert.error("Data not found")})),u}t.$inject=["$scope","farst","HttpService","$rootScope"]}();