!function(){"use strict";function e(t,e,o,n,i,r,a,l,s,c){var d=this;function u(e){d.model=e.data.data.records[0],d.prefType=d.model.type,d.getMenus(),d.model.isActive=1==d.model.isActive,r.loadingOut()}function p(e){e&&e.reload&&d.init()}return d.isCreate="new"==o.id,d.ui={},d.model={},d.accessLevel=[{id:1,name:"Developer"},{id:2,name:"Administrator"},{id:3,name:"Operator"}],d.ui.back=function(){n.go("app.sys.role")},d.ui.save=function(){d.model.isActive=1==d.model.isActive?1:0,d.isCreate?i.saveRole(d.model,function(e){n.go("app.sys.role-entry",{id:e})}):i.updateRole(d.model,function(){n.go("app.sys.role")})},d.getMenus=function(e){return l.post("/roles/getById",{id:parseInt(o.id)}).then(function(e){d.model.roleAccess=e.data.data.records})},t.$on("$destroy",function(){c.unregisterCallback(d.logKey),s.cancelAll()}),d.changeRoleType=function(e){r.loadingIn(),console.log(e),r.Alert.confirm("Perubahan Role","Are you sure you want to change this role? you will lost your data.",function(){t.$apply(function(){d.model.roleAccess.forEach(e=>{e.access=!1,e.read=!1,e.write=!1,e.delete=!1}),d.prefType=d.model.type})},function(){t.$apply(function(){d.model.type=d.prefType})}),r.loadingOut()},d.logKey="",d.init=(d.logKey=c.registerCallback(p,!0),r.loadingIn(),d.opts=r.singleDateFormat(r.l.DATEFORMAT),d.isCreate||l.post("/roles/get",{id:parseInt(o.id)}).then(u),d.validate=function(e,o){return a.formValidation(t,"roleForm",e,o)},d.dCurrency=r.dCurrency,void r.loadingOut()),d}angular.module("ummuza").controller("roleEntryCtrl",e),e.$inject=["$scope","$timeout","$stateParams","$state","roleEntryService","farst","validationService","HttpService","pendingRequest","modalLoginService"]}();