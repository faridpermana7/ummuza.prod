!function(){"use strict";function e(e,t,a,l,n,r,i){var o,d=this,u=(d.ui={},d.status=100,{});function s(e,t,a,l){var n='<button class="btn btn-default" rel="tooltip" title="Edit" ng-click="rl.ui.edit('+e.roleId+')">   <i class="fa fa-edit"></i></button>&nbsp;';return"COU"!=e.module&&(n+='<button class="btn btn-default" rel="tooltip" title="Delete" ng-click="rl.ui.delete('+e.roleId+')">   <i class="fa fa-times"></i></button>&nbsp;'),n}function c(e){var t="";switch(e){case 1:t="Developer";break;case 2:t="Administrator";break;case 3:t="Operator"}return t}function b(e,t,a,l){return e?n.l.toLocaleDateStr(n.l.toDatetimeUTC(e).toString(),n.l.DATETIME_FORMAT):"-"}function f(e){e&&e.reload&&d.datatable.draw()}return u.ids=[],d.dtCallback=function(e){d.datatable=e.DataTable},d.ui.search=function(){d.datatable.search(d.Keyword).draw()},d.ui.clear=function(){d.username=void 0,d.fullName=void 0,d.roleName=void 0,d.status=void 0},d.ui.filter=function(){var e=[];d.name&&e.push({field:"name",operator:"=",value:d.name}),d.type&&e.push({field:"type",operator:"=",value:d.type}),null!=d.status&&100!=d.status&&e.push({field:"isActive",operator:"=",value:d.status}),u.filters=e,d.dtService.param=u,d.datatable.draw()},d.ui.opts=n.getDateRange(function(e){e.StartDate=e.model.startDate,e.EndDate=e.model.endDate,d.dtService.param.data=e,d.datatable.draw()}),d.ui.add=function(){t.go("app.sys.role-entry",{id:"new"})},d.ui.edit=function(e){t.go("app.sys.role-entry",{id:e})},d.ui.delete=function(e){l.deleteRole({Id:e},d.datatable)},e.$on("ui.layout.resize",function(e,t,a){d.datatable.columns.adjust()}),e.$on("ui.layout.toggle",function(e,t){setTimeout(function(){d.datatable.columns.adjust()},700)}),e.$on("$destroy",function(){i.unregisterCallback(d.logKey),r.cancelAll()}),d.logKey="",d.init=(e=e,o=i,n.loadingIn(),d.logKey=o.registerCallback(f,!0),d.date={startDate:n.l.getDate().subtract(7,"days"),endDate:n.l.getDate()},d.dtService=a.getService(),d.dtOptions=d.dtService.initTable(e,"/roles/get",{route:"app.role-entry",fixedColumn:[3,1]},"roleId"),d.dtColumns=d.dtService.setColumn([{data:"roleId",className:"text-center"},{data:"name"},,{data:"type",render:c,className:"text-center"},{data:"status",className:"text-center"},{data:"updatedBy",className:"text-center"},{data:"updatedDate",render:b},{data:null,title:"",render:s,className:"text-center"}]),d.isCollapsed=!0,d.statusParam=[{value:100,label:"All"},{value:0,label:"Disable"},{value:1,label:"Enable"}],void n.loadingOut()),d}angular.module("ummuza").controller("roleCtrl",e),e.$inject=["$scope","$state","datatableService","roleEntryService","farst","pendingRequest","modalLoginService"]}();