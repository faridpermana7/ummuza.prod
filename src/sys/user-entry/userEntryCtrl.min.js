!function(){"use strict";function e(a,e,t,o,n,s,i,r,l,d){var c,u=this;function m(e){u.model=e.data.data,console.log(u.model),u.listCity=[{cityId:u.model.cityId,name:u.model.cityName}],u.listLocation=[{locationId:u.model.locationId,name:u.model.locationName}],u.listRole=[{roleId:u.model.roleId,name:u.model.roleName}],0<u.model.parentMemberId&&(u.isGroup=!1),i.loadingOut()}return u.isCreate="new"==e.id,u.ui={},u.model={},u.isVisibleMember=!0,u.isGroup=!0,u.invalidPass="",u.model.userAddresses=[],u.model.contactPersons=[],u.model.dataStatusId=1,u.model.gender=1,u.useContact=!1,u.ui.back=function(){n.go("app.sys.user")},u.ui.save=function(){1==u.isGroup&&(u.model.memberId=u.parentMemberId),""==u.invalidPass&&(u.isCreate?s.saveUser(u.model,function(){n.go("app.sys.user")}):s.updateUser(u.model,function(){n.go("app.sys.user")}))},u.CheckPassword=function(){var e="";u.model.password&&(null==u.model.password.match(/(?=.*\d)/)&&(e+="Should contain at least one digit"),null==u.model.password.match(/(?=.*[a-z])/)&&(e=""===e?"Should contain at least lower case":e+"\nShould contain at least lower case"),null==u.model.password.match(/(?=.*[A-Z])/)&&(e=""===e?"Should contain at least upper case":e+"\nShould contain at least upper case"),null==u.model.password.match(/[a-zA-Z0-9!@#$%^&*]{8,}/)&&(e=""===e?"Should contain at least 8 characters":e+"\nShould contain at least 8 characters"),null==u.model.password.match(/(?=.*[!@#$%^&*])/))&&(e=""===e?"Should contain at least one special characters":e+"\nShould contain at least one special characters"),u.invalidPass=e},u.getCitizenship=function(e){return l.post("/country/get",{Keyword:e}).then(function(e){u.listCitizenship=e.data.data.data})},u.getCity=function(e){l.post("/cities/get-list",{keyword:e,pageSize:10}).then(function(e){u.listCity=e.data.data.records})},u.getRole=function(e){return l.post("/roles/get",{id:0,Keyword:"COU",sortDir:"asc",sortName:"roleId"}).then(function(e){u.listRole=e.data.data.records})},u.getMemberList=function(e){l.post("/members/get-list",{keyword:e,pageSize:10,filters:[{field:"parentId",operator:"=",value:u.parentMemberId}]}).then(function(e){u.listMember=e.data.data.records})},u.getGender=function(e){u.listGender=[{id:1,name:"Male"},{id:2,name:"Female"}]},u.getStatus=function(e){u.listStatus=[{id:1,name:"Active"},{id:0,name:"Suspend"}]},a.$on("$destroy",function(){d.cancelAll()}),u.init=(i.loadingIn(),u.opts=i.singleDateFormat(i.l.DATEFORMAT),u.model.birthDate=i.l.getDate(),c=t.localStorage.getItem("user"),o(function(){null!=(c=JSON.parse(c)).parentMemberName&&(u.isVisibleMember=!1,u.model.memberId=c.memberId,u.isGroup=!1),u.parentMemberId=c.memberId},0),u.isCreate||l.get("/users/"+e.id,{}).then(m),u.validate=function(e,t){return r.formValidation(a,"user",e,t)},u.dCurrency=i.dCurrency,void i.loadingOut()),u}angular.module("ummuza").controller("userEntryCtrl",e),e.$inject=["$scope","$stateParams","$window","$timeout","$state","userEntryService","farst","validationService","HttpService","pendingRequest"]}();